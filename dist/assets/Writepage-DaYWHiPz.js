function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/TinymceEditor-BJgp54N1.js","assets/index-gfkfeWlX.js","assets/index-Duk4CEpK.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as a,h as T,j as e,B as l,F as I,S as v,T as g,I as C,g as L,G as z,a as w,_ as R}from"./index-gfkfeWlX.js";import{u as _,c as E}from"./articles-DMhp3gmU.js";import{T as P}from"./chunk-4IH3O7BJ-CffiBoUf.js";function A({setArticleData:n}){const s=a.useRef(null),[o,c]=a.useState(""),[d,h]=a.useState(!1),u=T({duration:4e3,isClosable:!0});return e.jsxs(l,{w:"full",mt:"12",children:[e.jsxs(l,{w:"full",p:"8",rounded:"lg",bg:"gray.50",mb:"6",children:[d?e.jsx(l,{display:"flex",alignItems:"center",justifyContent:"center",rounded:"full",w:"60px",h:"60px",borderColor:"gray.600",border:"1px",mx:"auto",cursor:"pointer",children:e.jsx(v,{})}):e.jsx(l,{display:"flex",alignItems:"center",justifyContent:"center",rounded:"full",w:"60px",h:"60px",borderColor:"gray.600",border:"1px",mx:"auto",cursor:"pointer",onClick:r,children:e.jsx(I,{size:"20"})}),e.jsx(g,{textAlign:"center",mt:"4",children:"Select a thumbnail"}),e.jsx(C,{type:"file",display:"none",ref:s,onChange:y})]}),o?e.jsx(L,{objectFit:"cover",w:"full",src:o,rounded:"lg"}):null]});function r(){var t;(t=s.current)==null||t.click()}function m(t){if(!t)return"No image selected";const f=t.name.split("."),x=f[f.length-1].toLowerCase();return x!=="jpg"&&x!=="png"&&x!=="jpeg"?"Invalid thumbnail":t.size>5e6?"Thumbnail size should be less than 5 MB":null}async function y(){var j;const t=(j=s.current)==null?void 0:j.files[0],f=m(t);if(f){u({status:"error",description:f});return}const x=URL.createObjectURL(t);c(x);try{const b=await _(t);n(i=>({...i,thumbnail:b.data.secure_url})),u({status:"success",description:"Thumbnail uploaded successfully"})}catch{u({status:"error",description:"There was an error while uploading your thumbnail"})}finally{h(!1)}}}function D(n){return z({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:"currentColor"},child:[]}]})(n)}function k({tags:n,setTags:s}){const[o,c]=a.useState("");return e.jsxs(l,{w:"full",mt:"3",children:[e.jsx(l,{display:"flex",gap:"1",flexWrap:"wrap",mb:"2",children:n.map(r=>e.jsxs(l,{display:"flex",gap:"1",justifyContent:"space-between",alignItems:"center",bg:"gray.100",rounded:"full",py:"1",px:"3",children:[e.jsx(g,{as:"span",children:r}),e.jsx(w,{size:"xs",onClick:()=>d(r),p:"0",m:"0",children:e.jsx(D,{size:13})})]}))}),e.jsx(C,{w:"full",variant:"flushed",onKeyDown:h,onChange:u,placeholder:"Enter tag and press enter",value:o})]});function d(r){s(n.filter(m=>m!==r))}function h(r){r.key==="Enter"&&o.trim()!==""&&(s([...n,o.trim()]),c(""))}function u(r){c(r.target.value)}}function B({isLoading:n,publish:s}){return e.jsx(w,{bg:"gray.800",color:"white",rounded:"full",flex:"1",px:"5",size:"lg",onClick:s,_hover:{bg:"gray.900",color:"white"},children:n?e.jsx(v,{}):"Publish"})}function H(){return e.jsx(w,{variant:"outline",rounded:"full",px:"5",size:"lg",borderColor:"gray.800",flex:"1",children:"Save as draft"})}const M=a.lazy(()=>R(()=>import("./TinymceEditor-BJgp54N1.js"),__vite__mapDeps([0,1,2])));function V(){const n=a.useRef(null),s=T({duration:4e3,isClosable:!0}),[o,c]=a.useState(""),[d,h]=a.useState({isPublishing:!1,isSavingAsDraft:!1}),[u,r]=a.useState([]),[m,y]=a.useState({title:"",summary:"",thumbnail:"",timeToReadInMinutes:0});return e.jsxs(l,{display:"flex",alignItems:"start",flexDir:"column",justifyContent:"center",maxW:"60vw",minH:"100vh",mx:"auto",py:"12",mt:"16",children:[e.jsx(C,{size:"lg",variant:"flushed",placeholder:"Title",fontSize:"2xl",mb:"14",onChange:t,name:"title"}),e.jsx(a.Suspense,{fallback:e.jsx(v,{}),children:e.jsx(M,{ref:n})}),e.jsx(g,{color:"gray.800",mt:"12",children:"Tags:"}),e.jsx(k,{tags:u,setTags:r}),e.jsx(g,{color:"gray.800",mt:"12",children:"Time to read in minutes:"}),e.jsx(C,{variant:"flushed",fontSize:"xl",onChange:t,name:"timeToReadInMinutes"}),e.jsx(g,{color:"gray.800",mt:"12",children:"Summary:"}),e.jsx(P,{variant:"flushed",size:"lg",fontSize:"xl",rows:2,onChange:t,name:"summary"}),e.jsx(A,{setArticleData:y}),e.jsx(g,{color:"red.500",mt:"8",children:o}),e.jsxs(l,{display:"flex",w:"full",alignItems:"center",justifyContent:"center",mt:"10",gap:"8",children:[e.jsx(H,{}),e.jsx(B,{isLoading:d.isPublishing,publish:x})]})]});function t(i){const{name:p,value:S}=i.target;y({...m,[p]:S})}function f(){var p;return Object.assign({},m,{tags:u,content:((p=n.current)==null?void 0:p.getContent())||"",is_published:!0})}async function x(){c(""),h({...d,isPublishing:!0});try{const i=f(),{error:p}=await E(i);if(p)return c(p);j("Article published successfully")}catch{b("Internal server error")}finally{h({...d,isPublishing:!1})}}function j(i){s({status:"success",description:i})}function b(i){s({status:"error",description:i})}}export{V as default};
