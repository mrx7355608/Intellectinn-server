import{u as m,O as M,F as k,r as u,j as e,B as a,T as t,P as z,Q as R,R as O,U as B,W as F,X as I,I as D,f as j,Y as H,b as d,S as _,J as A,Z as E,H as N,L as W}from"./index-CsVsQMYP.js";import{T as Y,a as J,b as Q,c as X}from"./chunk-IAXSQ4X2-HPL_bb-G.js";function Z(){const{user:o,updateProfilePicture:g}=m(),{isOpen:y,onOpen:w,onClose:p}=M(),{showSuccessToast:C,showErrorToast:c}=k(),l=u.useRef(null),[h,S]=u.useState(""),[b,x]=u.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(a,{children:[e.jsx(t,{onClick:w,cursor:"pointer",_hover:{textDecoration:"underline"},as:"span",children:"Update Profile picture"}),e.jsx(t,{fontSize:"sm",color:"gray.500",children:"Select a new profile picture"})]}),e.jsxs(z,{closeOnOverlayClick:!1,isOpen:y,onClose:p,children:[e.jsx(R,{}),e.jsxs(O,{children:[e.jsx(B,{children:"Update profile picture"}),e.jsx(F,{}),e.jsxs(I,{children:[e.jsx(D,{type:"file",display:"none",ref:l,onChange:U}),h?e.jsx(j,{objectFit:"cover",w:"150px",h:"150px",mx:"auto",rounded:"full",src:h}):e.jsx(j,{objectFit:"cover",w:"150px",h:"150px",mx:"auto",rounded:"full",src:o==null?void 0:o.profilePicture})]}),e.jsxs(H,{children:[e.jsx(d,{onClick:P,colorScheme:"pink",mr:3,children:"Select"}),e.jsx(d,{colorScheme:"teal",mr:3,onClick:v,children:b?e.jsx(_,{}):"Update"}),e.jsx(d,{variant:"ghost",onClick:p,children:"Cancel"})]})]})]})]});function P(){var s;(s=l.current)==null||s.click()}function T(s){if(!s)return"No image selected";const r=s.name.split("."),n=r[r.length-1].toLowerCase();return n!=="jpg"&&n!=="png"&&n!=="jpeg"?"Only jpg, png and jpeg image formats are allowed":s.size>2e6?"Image size should be less than 2 MB":null}function U(){var i;const s=(i=l.current)==null?void 0:i.files[0],r=T(s);if(r)return c(r);const n=URL.createObjectURL(s);S(n)}async function v(){var s;x(!0);try{const r=(s=l.current)==null?void 0:s.files[0],i=(await A(r)).data.secure_url,{data:L,error:f}=await E({profilePicture:i});if(f)return c(f);g(L.profilePicture),C("Profile picture updated successfully")}catch{c("There was an error while updating your profile picture")}finally{x(!1)}}}function G(){const{user:o}=m();return e.jsxs(a,{w:"68vw",pt:"14",mt:"16",mx:"auto",children:[e.jsx(N,{children:"Settings"}),e.jsxs(Y,{size:"sm",mt:"7",children:[e.jsx(J,{overflowY:"hidden",height:"full",children:e.jsx(Q,{py:"2",whiteSpace:"nowrap",m:"0",children:"Account"})}),e.jsxs(X,{py:"8",children:[e.jsx(Z,{}),e.jsxs(a,{mt:"5",children:[e.jsx(W,{to:`/profile/${o==null?void 0:o._id}/about`,children:e.jsx(t,{_hover:{textDecor:"underline"},children:"Update Bio"})}),e.jsx(t,{fontSize:"sm",color:"gray.500",children:"Write about yourself and your expertise to attract audience"})]}),e.jsxs(a,{mt:"5",children:[e.jsx(t,{children:"Change Password"}),e.jsx(t,{fontSize:"sm",color:"gray.500",children:"Choose a new password to login to your account"})]}),e.jsxs(a,{mt:"5",children:[e.jsx(t,{color:"red.600",children:"Delete Account"}),e.jsx(t,{fontSize:"sm",color:"gray.500",children:"Delete your account and all of your content"})]})]})]})]})}export{G as default};
