import{G as w,b,r as a,h as v,j as e,a as o,H as M,B as g,S as O,k as B,m as P,L as I,O as T}from"./index-N_Esq6xR.js";import{N as E}from"./NestedLayoutsSpinner-C8iwVxCo.js";import{u as H,M as L,a as z,b as F,c as U,d as V,e as A}from"./chunk-4FCEGNGT-DaJvZmNO.js";import{T as _,a as G,b as h,c as N}from"./chunk-IAXSQ4X2-Fn8_156k.js";import"./chunk-AXLEE3EK-CzTmDxlU.js";import"./index-Dx2y2C8D.js";function R(t){return w({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"},child:[]}]})(t)}function W(){const{user:t,setUser:d}=b(),{isOpen:f,onOpen:u,onClose:r}=H(),[c,l]=a.useState(["Web development","Software Engineering","Software development","Politics","Economy","Psychology","Computer Science","Apex legends","Counter Strike 2","Literatue","Reading","Poetry"]),[n,p]=a.useState(t.topicsInterestedIn),[S,m]=a.useState(!1),x=v({isClosable:!0,duration:4e3});return e.jsxs(e.Fragment,{children:[e.jsx(o,{size:"sm",bg:"transparent",w:"ful",onClick:u,children:e.jsx(R,{})}),e.jsxs(L,{isOpen:f,onClose:r,isCentered:!0,motionPreset:"slideInBottom",size:"xl",closeOnOverlayClick:!1,closeOnEsc:!1,children:[e.jsx(z,{}),e.jsxs(F,{children:[e.jsx(U,{}),e.jsxs(V,{children:[e.jsx(M,{textAlign:"center",mt:"8",fontSize:"2xl",children:"Select your interests"}),e.jsx(g,{display:"flex",gap:"2",flexWrap:"wrap",my:"12",children:c.map(s=>n!=null&&n.includes(s)?e.jsx(o,{variant:"outline",rounded:"full",color:"white",borderColor:"black",bg:"black",onClick:()=>C(s),_hover:{bg:"black",color:"white"},children:s},s):e.jsx(o,{variant:"outline",rounded:"full",color:"black",borderColor:"black",onClick:()=>y(s),children:s},s))})]}),e.jsxs(A,{children:[S?e.jsx(o,{colorScheme:"teal",mr:3,children:e.jsx(O,{})}):e.jsx(o,{colorScheme:"teal",mr:3,onClick:k,children:"Update"}),e.jsx(o,{onClick:r,children:"Cancel"})]})]})]})]});function y(s){p([...n,s])}function C(s){p(n.filter(i=>i!==s))}async function k(){try{m(!0);const{data:s,error:i}=await B({topicsInterestedIn:n});if(i)return x({description:i,status:"error"});p(s.topicsInterestedIn),d(j=>j?{...j,topicsInterestedIn:s.topicsInterestedIn}:null),x({description:"Interests updated successfully",status:"success"}),r()}catch{x({description:"Internal server error",status:"error"})}finally{m(!1)}}}function Q(){const{user:t}=b(),[d,f]=P(),[u,r]=a.useState(0),c=d.get("tag");return a.useEffect(()=>{if(!c)return r(0);const l=(t==null?void 0:t.topicsInterestedIn.findIndex(n=>n===c))||0;r(l+1)},[c,t==null?void 0:t.topicsInterestedIn]),e.jsx(g,{w:"70vw",p:"12",mx:"auto",children:e.jsxs(_,{size:"sm",mt:"12",index:u,children:[e.jsxs(G,{overflowY:"hidden",height:"full",children:[e.jsx(I,{to:"/user",children:e.jsx(h,{py:"2",whiteSpace:"nowrap",m:"0",children:"For you"})}),t.topicsInterestedIn.map(l=>e.jsx(I,{to:`/user?tag=${l}`,children:e.jsx(h,{py:"2",whiteSpace:"nowrap",m:"0",children:l})})),e.jsx(h,{children:e.jsx(W,{})})]}),e.jsx(N,{py:"10",children:e.jsx(a.Suspense,{fallback:e.jsx(E,{}),children:e.jsx(T,{})})})]})})}export{Q as default};
